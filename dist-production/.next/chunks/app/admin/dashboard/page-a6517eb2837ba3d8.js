(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{416:(e,a,t)=>{"use strict";t.d(a,{p:()=>i});var s=t(4);t(3176);var r=t(8347);function i(e){let{className:a,type:t,...i}=e;return(0,s.jsx)("input",{type:t,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...i})}},894:(e,a,t)=>{"use strict";t.d(a,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>i,aR:()=>n});var s=t(4);t(3176);var r=t(8347);function i(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...t})}function n(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...t})}function l(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",a),...t})}function d(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",a),...t})}function c(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",a),...t})}},1110:(e,a,t)=>{Promise.resolve().then(t.bind(t,9864)),Promise.resolve().then(t.bind(t,4596)),Promise.resolve().then(t.bind(t,1491)),Promise.resolve().then(t.bind(t,7040))},1491:(e,a,t)=>{"use strict";t.d(a,{default:()=>v});var s=t(4),r=t(3176),i=t(6073),n=t(8924),l=t(416),d=t(4574),c=t(4294),o=t(1708),u=t(894),x=t(9773),m=t(879),g=t(3088),p=t(1304);let h=(0,p.createServerReference)("60d96accb1e10bc7052fde7402a99952c258d62715",p.callServer,void 0,p.findSourceMapURL,"createAuction");function f(){let{pending:e}=(0,i.useFormStatus)();return(0,s.jsx)(n.$,{type:"submit",disabled:e,size:"lg",className:"w-full",children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Creando subasta..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Crear Subasta"]})})}function v(e){let{categories:a,userId:t,isAdmin:i=!1}=e,[p,v]=(0,r.useState)(""),[b,j]=(0,r.useState)(""),[y,N]=(0,r.useState)(a||[]),[w,C]=(0,r.useState)(!1),[z,k]=(0,r.useState)(null),[S,A]=(0,r.useActionState)(h,null);return((0,r.useEffect)(()=>{a&&0!==a.length||k("No hay categor\xedas disponibles. Por favor, contacta al administrador.")},[a]),w)?(0,s.jsx)(u.Zp,{children:(0,s.jsx)(u.Wu,{className:"flex items-center justify-center py-8",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(x.A,{className:"h-4 w-4 animate-spin"}),(0,s.jsx)("span",{children:"Cargando categor\xedas..."})]})})}):z?(0,s.jsx)(u.Zp,{children:(0,s.jsx)(u.Wu,{className:"flex items-center justify-center py-8",children:(0,s.jsx)("div",{className:"text-red-600",children:z})})}):(0,s.jsxs)(u.Zp,{children:[(0,s.jsx)(u.aR,{children:(0,s.jsxs)(u.ZB,{className:"flex items-center",children:[(0,s.jsx)(m.A,{className:"mr-2 h-5 w-5"}),"Detalles de la Subasta"]})}),(0,s.jsx)(u.Wu,{children:(0,s.jsxs)("form",{action:A,className:"space-y-6",children:[(0,s.jsx)("input",{type:"hidden",name:"userId",value:i?"admin":t||""}),(0,s.jsx)("input",{type:"hidden",name:"categoryId",value:p}),(0,s.jsx)("input",{type:"hidden",name:"isAdmin",value:i.toString()}),(null==S?void 0:S.error)&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:S.error}),(null==S?void 0:S.success)&&(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:S.success}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.J,{htmlFor:"title",children:"T\xedtulo de la Subasta *"}),(0,s.jsx)(l.p,{id:"title",name:"title",placeholder:"Ej: Camiseta Real Madrid 2024 Firmada",required:!0,className:"h-12"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.J,{htmlFor:"category",children:"Categor\xeda *"}),(0,s.jsxs)(o.l6,{value:p,onValueChange:v,required:!0,children:[(0,s.jsx)(o.bq,{className:"h-12",children:(0,s.jsx)(o.yv,{placeholder:"Selecciona una categor\xeda"})}),(0,s.jsx)(o.gC,{children:y&&y.length>0?y.map(e=>(0,s.jsx)(o.eb,{value:e.id,children:e.name},e.id)):(0,s.jsx)("div",{className:"px-2 py-1 text-sm text-gray-500",children:"No hay categor\xedas disponibles"})})]}),0===y.length&&(0,s.jsx)("p",{className:"text-sm text-red-500",children:"No se pudieron cargar las categor\xedas. Por favor, recarga la p\xe1gina."})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.J,{htmlFor:"description",children:"Descripci\xf3n *"}),(0,s.jsx)(c.T,{id:"description",name:"description",placeholder:"Describe tu camiseta: talla, estado, historia, autenticidad, etc.",required:!0,rows:4,className:"resize-none"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.J,{htmlFor:"imageUrl",children:"URL de la Imagen"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(l.p,{id:"imageUrl",name:"imageUrl",type:"url",placeholder:"https://ejemplo.com/imagen.jpg",value:b,onChange:e=>j(e.target.value),className:"h-12"}),(0,s.jsx)(n.$,{type:"button",variant:"outline",className:"h-12 px-4 bg-transparent",children:(0,s.jsx)(g.A,{className:"h-4 w-4"})})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Sube una imagen clara de tu camiseta"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.J,{htmlFor:"startingPrice",children:"Precio Inicial ($) *"}),(0,s.jsx)(l.p,{id:"startingPrice",name:"startingPrice",type:"number",step:"0.01",min:"1",placeholder:"50.00",required:!0,className:"h-12"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.J,{htmlFor:"buyNowPrice",children:"Precio Compra Inmediata ($)"}),(0,s.jsx)(l.p,{id:"buyNowPrice",name:"buyNowPrice",type:"number",step:"0.01",min:"1",placeholder:"200.00 (opcional)",className:"h-12"})]})]}),(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Informaci\xf3n Importante"}),(0,s.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,s.jsx)("li",{children:"• La subasta durar\xe1 exactamente 24 horas desde su creaci\xf3n"}),(0,s.jsx)("li",{children:"• El precio inicial debe ser realista para atraer pujadores"}),(0,s.jsx)("li",{children:"• Si estableces un precio de compra inmediata, la subasta se adjudicar\xe1 autom\xe1ticamente al primer usuario que puje ese monto"}),(0,s.jsx)("li",{children:"• Las im\xe1genes claras aumentan las posibilidades de venta"}),(0,s.jsx)("li",{children:"• Una vez creada, no podr\xe1s cancelar la subasta"})]})]}),(0,s.jsx)(f,{})]})})]})}},1708:(e,a,t)=>{"use strict";t.d(a,{bq:()=>u,eb:()=>m,gC:()=>x,l6:()=>c,yv:()=>o});var s=t(4);t(3176);var r=t(276),i=t(5475),n=t(5351),l=t(1666),d=t(8347);function c(e){let{...a}=e;return(0,s.jsx)(r.bL,{"data-slot":"select",...a})}function o(e){let{...a}=e;return(0,s.jsx)(r.WT,{"data-slot":"select-value",...a})}function u(e){let{className:a,size:t="default",children:n,...l}=e;return(0,s.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":t,className:(0,d.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...l,children:[n,(0,s.jsx)(r.In,{asChild:!0,children:(0,s.jsx)(i.A,{className:"size-4 opacity-50"})})]})}function x(e){let{className:a,children:t,position:i="popper",...n}=e;return(0,s.jsx)(r.ZL,{children:(0,s.jsxs)(r.UC,{"data-slot":"select-content",className:(0,d.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...n,children:[(0,s.jsx)(g,{}),(0,s.jsx)(r.LM,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,s.jsx)(p,{})]})})}function m(e){let{className:a,children:t,...i}=e;return(0,s.jsxs)(r.q7,{"data-slot":"select-item",className:(0,d.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),...i,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(r.VF,{children:(0,s.jsx)(n.A,{className:"size-4"})})}),(0,s.jsx)(r.p4,{children:t})]})}function g(e){let{className:a,...t}=e;return(0,s.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,s.jsx)(l.A,{className:"size-4"})})}function p(e){let{className:a,...t}=e;return(0,s.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,s.jsx)(i.A,{className:"size-4"})})}},2442:(e,a,t)=>{"use strict";t.d(a,{UU:()=>r});var s=t(5926);function r(){return(0,s.createBrowserClient)("https://astjjzexwigycsfzcfon.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFzdGpqemV4d2lneWNzZnpjZm9uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDAyODgsImV4cCI6MjA3MDg3NjI4OH0.JgrYxcCe9FmN-QjJ_6r9pXcrB6KAJRPX1KrKx35HZI4")}r()},4294:(e,a,t)=>{"use strict";t.d(a,{T:()=>n});var s=t(4),r=t(3176),i=t(8347);let n=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...r})});n.displayName="Textarea"},4574:(e,a,t)=>{"use strict";t.d(a,{J:()=>c});var s=t(4),r=t(3176),i=t(4985),n=t(4552),l=t(8347);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(i.b,{ref:a,className:(0,l.cn)(d(),t),...r})});c.displayName=i.b.displayName},4596:(e,a,t)=>{"use strict";t.d(a,{CategoryManager:()=>A});var s=t(4),r=t(3176),i=t(8924),n=t(416),l=t(4574),d=t(4294),c=t(894),o=t(6081),u=t(3771),x=t(8347);function m(e){let{...a}=e;return(0,s.jsx)(o.bL,{"data-slot":"dialog",...a})}function g(e){let{...a}=e;return(0,s.jsx)(o.l9,{"data-slot":"dialog-trigger",...a})}function p(e){let{...a}=e;return(0,s.jsx)(o.ZL,{"data-slot":"dialog-portal",...a})}function h(e){let{className:a,...t}=e;return(0,s.jsx)(o.hJ,{"data-slot":"dialog-overlay",className:(0,x.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...t})}function f(e){let{className:a,children:t,showCloseButton:r=!0,...i}=e;return(0,s.jsxs)(p,{"data-slot":"dialog-portal",children:[(0,s.jsx)(h,{}),(0,s.jsxs)(o.UC,{"data-slot":"dialog-content",className:(0,x.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...i,children:[t,r&&(0,s.jsxs)(o.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(u.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function v(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,x.cn)("flex flex-col gap-2 text-center sm:text-left",a),...t})}function b(e){let{className:a,...t}=e;return(0,s.jsx)(o.hE,{"data-slot":"dialog-title",className:(0,x.cn)("text-lg leading-none font-semibold",a),...t})}function j(e){let{className:a,...t}=e;return(0,s.jsx)(o.VY,{"data-slot":"dialog-description",className:(0,x.cn)("text-muted-foreground text-sm",a),...t})}var y=t(6949),N=t(9221),w=t(2674),C=t(1304);let z=(0,C.createServerReference)("00cf03d069ef1215a08598d1a69ea781323829d52f",C.callServer,void 0,C.findSourceMapURL,"getCategories"),k=(0,C.createServerReference)("6050ed349551254eb2e38dd1b762ca8bea4fd6e758",C.callServer,void 0,C.findSourceMapURL,"createCategory"),S=(0,C.createServerReference)("406ea0356ea3d2a9a500106483661d221f2b4f5b00",C.callServer,void 0,C.findSourceMapURL,"deleteCategory");function A(){let[e,a]=(0,r.useState)([]),[t,o]=(0,r.useState)(!0),[u,x]=(0,r.useState)(!1),[p,h]=(0,r.useState)({name:"",description:""}),[C,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{E()},[]);let E=async()=>{try{o(!0);let e=await z();a(e)}catch(e){console.error("Error loading categories:",e)}finally{o(!1)}},_=async e=>{if(e.preventDefault(),p.name.trim())try{A(!0),await k(p.name,p.description),h({name:"",description:""}),x(!1),await E()}catch(e){console.error("Error creating category:",e)}finally{A(!1)}},I=async e=>{if(confirm("\xbfEst\xe1s seguro de que quieres eliminar esta categor\xeda?"))try{await S(e),await E()}catch(e){console.error("Error deleting category:",e)}};return t?(0,s.jsx)(c.Zp,{children:(0,s.jsxs)(c.aR,{children:[(0,s.jsx)(c.ZB,{children:"Gesti\xf3n de Categor\xedas"}),(0,s.jsx)(c.BT,{children:"Cargando categor\xedas..."})]})}):(0,s.jsxs)(c.Zp,{children:[(0,s.jsxs)(c.aR,{children:[(0,s.jsxs)(c.ZB,{className:"flex items-center justify-between",children:["Gesti\xf3n de Categor\xedas",(0,s.jsxs)(m,{open:u,onOpenChange:x,children:[(0,s.jsx)(g,{asChild:!0,children:(0,s.jsxs)(i.$,{children:[(0,s.jsx)(N.A,{className:"w-4 h-4 mr-2"}),"Agregar Categor\xeda"]})}),(0,s.jsxs)(f,{children:[(0,s.jsxs)(v,{children:[(0,s.jsx)(b,{children:"Crear Nueva Categor\xeda"}),(0,s.jsx)(j,{children:"Agrega una nueva categor\xeda para las subastas de camisetas."})]}),(0,s.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(l.J,{htmlFor:"name",children:"Nombre"}),(0,s.jsx)(n.p,{id:"name",value:p.name,onChange:e=>h(a=>({...a,name:e.target.value})),placeholder:"Ej: F\xfatbol, B\xe1squetbol...",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l.J,{htmlFor:"description",children:"Descripci\xf3n"}),(0,s.jsx)(d.T,{id:"description",value:p.description,onChange:e=>h(a=>({...a,description:e.target.value})),placeholder:"Descripci\xf3n de la categor\xeda...",rows:3})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>x(!1),children:"Cancelar"}),(0,s.jsx)(i.$,{type:"submit",disabled:C,children:C?"Creando...":"Crear Categor\xeda"})]})]})]})]})]}),(0,s.jsx)(c.BT,{children:"Gestiona las categor\xedas disponibles para las subastas"})]}),(0,s.jsx)(c.Wu,{children:0===e.length?(0,s.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No hay categor\xedas disponibles. Crea la primera categor\xeda."}):(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,s.jsxs)("div",{className:"border rounded-lg p-4 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(y.E,{variant:"secondary",children:e.name}),(0,s.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>I(e.id),className:"text-red-600 hover:text-red-700",children:(0,s.jsx)(w.A,{className:"w-4 h-4"})})]}),e.description&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]},e.id))})})]})}},6949:(e,a,t)=>{"use strict";t.d(a,{E:()=>d});var s=t(4);t(3176);var r=t(1786),i=t(4552),n=t(8347);let l=(0,i.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:a,variant:t,asChild:i=!1,...d}=e,c=i?r.DX:"span";return(0,s.jsx)(c,{"data-slot":"badge",className:(0,n.cn)(l({variant:t}),a),...d})}},7040:(e,a,t)=>{"use strict";t.d(a,{Tabs:()=>n,TabsContent:()=>c,TabsList:()=>l,TabsTrigger:()=>d});var s=t(4);t(3176);var r=t(7161),i=t(8347);function n(e){let{className:a,...t}=e;return(0,s.jsx)(r.bL,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",a),...t})}function l(e){let{className:a,...t}=e;return(0,s.jsx)(r.B8,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...t})}function d(e){let{className:a,...t}=e;return(0,s.jsx)(r.l9,{"data-slot":"tabs-trigger",className:(0,i.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...t})}function c(e){let{className:a,...t}=e;return(0,s.jsx)(r.UC,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",a),...t})}},8347:(e,a,t)=>{"use strict";t.d(a,{cn:()=>i});var s=t(5894),r=t(7399);function i(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.QP)((0,s.$)(a))}},8924:(e,a,t)=>{"use strict";t.d(a,{$:()=>d,r:()=>l});var s=t(4);t(3176);var r=t(1786),i=t(4552),n=t(8347);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:a,variant:t,size:i,asChild:d=!1,...c}=e,o=d?r.DX:"button";return(0,s.jsx)(o,{"data-slot":"button",className:(0,n.cn)(l({variant:t,size:i,className:a})),...c})}},9864:(e,a,t)=>{"use strict";t.d(a,{default:()=>F});var s=t(4),r=t(3176),i=t(894),n=t(6949),l=t(8924),d=t(9954),c=t(2520),o=t(2674),u=t(8587),x=t(7603),m=t(9713),g=t.n(m),p=t(2442),h=t(1304);let f=(0,h.createServerReference)("40aba0b1f64800b166394ac525beb56b61bf154204",h.callServer,void 0,h.findSourceMapURL,"deleteAuctionAdmin");var v=t(1938),b=t(3888),j=t(8347);function y(e){let{...a}=e;return(0,s.jsx)(b.bL,{"data-slot":"alert-dialog",...a})}function N(e){let{...a}=e;return(0,s.jsx)(b.l9,{"data-slot":"alert-dialog-trigger",...a})}function w(e){let{...a}=e;return(0,s.jsx)(b.ZL,{"data-slot":"alert-dialog-portal",...a})}function C(e){let{className:a,...t}=e;return(0,s.jsx)(b.hJ,{"data-slot":"alert-dialog-overlay",className:(0,j.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...t})}function z(e){let{className:a,...t}=e;return(0,s.jsxs)(w,{children:[(0,s.jsx)(C,{}),(0,s.jsx)(b.UC,{"data-slot":"alert-dialog-content",className:(0,j.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...t})]})}function k(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,j.cn)("flex flex-col gap-2 text-center sm:text-left",a),...t})}function S(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,j.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...t})}function A(e){let{className:a,...t}=e;return(0,s.jsx)(b.hE,{"data-slot":"alert-dialog-title",className:(0,j.cn)("text-lg font-semibold",a),...t})}function E(e){let{className:a,...t}=e;return(0,s.jsx)(b.VY,{"data-slot":"alert-dialog-description",className:(0,j.cn)("text-muted-foreground text-sm",a),...t})}function _(e){let{className:a,...t}=e;return(0,s.jsx)(b.rc,{className:(0,j.cn)((0,l.r)(),a),...t})}function I(e){let{className:a,...t}=e;return(0,s.jsx)(b.ZD,{className:(0,j.cn)((0,l.r)({variant:"outline"}),a),...t})}function F(){let[e,a]=(0,r.useState)([]),[t,m]=(0,r.useState)(!0),[h,b]=(0,r.useState)(null);(0,v.useRouter)(),(0,r.useEffect)(()=>{(async function(){let e=(0,p.UU)(),{data:t,error:s}=await e.from("auctions").select("\n          *,\n          categories (name),\n          bids (id, amount)\n        ").order("created_at",{ascending:!1});s?console.error("Error fetching auctions:",s):a(t||[]),m(!1)})()},[]);let j=async(t,s)=>{b(t);try{await f(t),a(e.filter(e=>e.id!==t))}catch(e){alert(e.message||"Error al eliminar la subasta")}finally{b(null)}};return t?(0,s.jsx)("div",{className:"text-center py-8",children:"Cargando subastas..."}):(0,s.jsx)("div",{className:"space-y-4",children:0===e.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No hay subastas creadas a\xfan"}):e.map(e=>{var a,t;return(0,s.jsxs)(i.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,s.jsx)(i.aR,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(i.ZB,{className:"text-lg",children:e.title}),(0,s.jsxs)(i.BT,{className:"flex items-center space-x-2 mt-1",children:[(0,s.jsx)(n.E,{variant:"secondary",children:null===(a=e.categories)||void 0===a?void 0:a.name}),(0,s.jsx)(n.E,{variant:"active"===e.status?"default":"secondary",children:"active"===e.status?"Activa":"Finalizada"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(g(),{href:"/auction/".concat(e.id),children:(0,s.jsxs)(l.$,{variant:"outline",size:"sm",children:[(0,s.jsx)(d.A,{className:"h-4 w-4 mr-1"}),"Ver"]})}),(0,s.jsx)(g(),{href:"/admin/edit-auction/".concat(e.id),children:(0,s.jsxs)(l.$,{variant:"outline",size:"sm",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 mr-1"}),"Editar"]})}),(0,s.jsxs)(y,{children:[(0,s.jsx)(N,{asChild:!0,children:(0,s.jsxs)(l.$,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 bg-transparent",disabled:h===e.id,children:[(0,s.jsx)(o.A,{className:"h-4 w-4 mr-1"}),h===e.id?"...":"Eliminar"]})}),(0,s.jsxs)(z,{children:[(0,s.jsxs)(k,{children:[(0,s.jsx)(A,{children:"\xbfEliminar subasta?"}),(0,s.jsxs)(E,{children:['\xbfEst\xe1s seguro de que quieres eliminar la subasta "',e.title,'"? Esta acci\xf3n no se puede deshacer.',e.bids&&e.bids.length>0&&(0,s.jsxs)("span",{className:"block mt-2 text-red-600 font-medium",children:["Esta subasta tiene ",e.bids.length," puja(s) y no se puede eliminar."]})]})]}),(0,s.jsxs)(S,{children:[(0,s.jsx)(I,{children:"Cancelar"}),(0,s.jsx)(_,{onClick:()=>j(e.id,e.title),disabled:e.bids&&e.bids.length>0,className:"bg-red-600 hover:bg-red-700",children:"Eliminar"})]})]})]})]})]})}),(0,s.jsx)(i.Wu,{children:(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(u.A,{className:"h-4 w-4 text-green-600"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-medium",children:["$",e.current_price]}),(0,s.jsx)("p",{className:"text-gray-500",children:"Precio actual"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(x.A,{className:"h-4 w-4 text-blue-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:(null===(t=e.bids)||void 0===t?void 0:t.length)||0}),(0,s.jsx)("p",{className:"text-gray-500",children:"Pujas"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:new Date(e.end_time).toLocaleDateString()}),(0,s.jsx)("p",{className:"text-gray-500",children:"Fecha fin"})]})]})})]},e.id)})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[713,30,733,756,790,922,476,571,358],()=>a(1110)),_N_E=e.O()}]);